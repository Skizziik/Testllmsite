<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Evaluation Report</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000000;
            background-image: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(59, 130, 246, 0.15), transparent);
            min-height: 100vh;
            color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #F6F0EB;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: -0.02em;
        }

        .header .subtitle {
            color: rgba(255, 255, 255, 0.65);
            font-size: 1.1rem;
            font-weight: 450;
        }

        /* Metrics Cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(59, 130, 246, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .metric-card .label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.55);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .metric-card .value {
            font-size: 1.8rem;
            font-weight: 650;
            margin-bottom: 8px;
            word-break: break-word;
        }

        .metric-card .subtext {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.45);
        }

        .metric-card.highlight {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(35, 46, 65, 0.4));
            border-color: rgba(59, 130, 246, 0.25);
        }

        /* Charts Section */
        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 900px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
        }

        .chart-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .chart-card h3 {
            margin-bottom: 20px;
            color: #F6F0EB;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        /* Results Table */
        .results-section {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            margin-bottom: 30px;
        }

        .results-section h2 {
            margin-bottom: 20px;
            color: #F6F0EB;
            font-weight: 600;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
            table-layout: fixed;
        }

        .results-table th {
            background: rgba(35, 46, 65, 0.5);
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.85);
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        /* Fixed column widths */
        .results-table th:nth-child(1),
        .results-table td:nth-child(1) { width: 50px; }
        .results-table th:nth-child(2),
        .results-table td:nth-child(2) { width: 25%; }
        .results-table th:nth-child(3),
        .results-table td:nth-child(3) { width: 30%; }
        .results-table th:nth-child(4),
        .results-table td:nth-child(4) { width: 80px; }
        .results-table th:nth-child(5),
        .results-table td:nth-child(5) { width: 200px; }
        .results-table th:nth-child(6),
        .results-table td:nth-child(6) { width: 120px; }

        .results-table td {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: top;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .results-table tr:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        /* Don't highlight details row on hover */
        .results-table tr.details-row:hover {
            background: transparent;
        }

        .question-cell {
            max-width: 300px;
        }

        .question-text {
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
        }

        .reference-text {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }

        .answer-cell {
            max-width: 400px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.75);
        }

        .score-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .metric-pill {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin: 2px;
            font-weight: 500;
        }

        .metrics-cell {
            min-width: 200px;
        }

        /* Expandable Details */
        .details-toggle {
            background: rgba(59, 130, 246, 0.15);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #3B82F6;
            padding: 6px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .details-toggle:hover {
            background: #3B82F6;
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .details-content {
            display: none;
            margin-top: 12px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.75);
        }

        .details-content.show {
            display: block;
        }

        /* Details Row - separate row for expanded details */
        .details-row {
            background: transparent;
        }

        .details-row td {
            padding: 0 !important;
            border-top: none;
        }

        .details-content-expanded {
            padding: 16px 20px;
            background: rgba(35, 46, 65, 0.3);
            border-radius: 0 0 8px 8px;
            margin: 0 8px 8px 8px;
            border: 1px solid rgba(59, 130, 246, 0.1);
            border-top: none;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
        }

        .detail-section {
            margin-bottom: 8px;
            background: rgba(0, 0, 0, 0.2);
            padding: 12px 14px;
            border-radius: 6px;
            border-left: 2px solid rgba(59, 130, 246, 0.4);
            font-size: 0.85rem;
            line-height: 1.5;
            color: rgba(255, 255, 255, 0.8);
        }

        .detail-section strong {
            color: rgba(255, 255, 255, 0.55);
            display: block;
            margin-bottom: 6px;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px 20px;
            color: rgba(255, 255, 255, 0.45);
            font-size: 0.85rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            margin-top: 20px;
        }

        .footer a {
            color: #3B82F6;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Prompt Modal */
        .prompt-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.8);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
            margin-top: 15px;
        }

        .prompt-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(59, 130, 246, 0.5);
            color: #3B82F6;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background: #0f1419;
            border-radius: 12px;
            padding: 24px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(59, 130, 246, 0.2);
            position: relative;
        }

        .modal-content h3 {
            color: #F6F0EB;
            margin-bottom: 16px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.6);
            width: 32px;
            height: 32px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.4);
            color: #ef4444;
        }

        .prompt-text {
            background: rgba(0, 0, 0, 0.4);
            padding: 16px;
            border-radius: 8px;
            font-family: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
            white-space: pre-wrap;
            line-height: 1.6;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>RAG Evaluation Report</h1>
            <p class="subtitle">Generated: 2026-01-06 03:41 | Questions: 2 | Model: Llama 3.1 8B Instruct (Q4_K_M)</p>
            <button class="prompt-btn" onclick="document.getElementById('promptModal').classList.add('show')">Show Test Config</button>
            <button class="prompt-btn" style="margin-left: 8px;" onclick="document.getElementById('serverConfigModal').classList.add('show')">Show Server Config</button>
        </div>

        <!-- Prompt Modal -->
        <div id="promptModal" class="modal-overlay" onclick="if(event.target===this)this.classList.remove('show')">
            <div class="modal-content">
                <button class="modal-close" onclick="document.getElementById('promptModal').classList.remove('show')">&times;</button>
                <h3>Test Configuration</h3>
                <div class="model-info" style="margin-bottom: 16px; padding: 12px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; border-left: 3px solid #3B82F6;">
                    <strong style="color: #3B82F6;">Model:</strong> <span style="color: rgba(255,255,255,0.9);">Llama 3.1 8B Instruct (Q4_K_M)</span>
                </div>
                <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 8px; font-size: 0.9rem;">System Prompt:</h4>
                <div class="prompt-text">You are an AI assistant for the game Minecraft.<br>Do NOT use &lt;think&gt; tags or internal reasoning. Respond directly with the answer.<br><br>Your task is to answer the player's question strictly using the provided context.<br>Do not rely on internal, general, or prior knowledge.<br>If the context does not contain the required information, explicitly say that you do not have enough information.<br><br>&lt;Game Description&gt;<br>Minecraft is a sandbox game by Mojang.<br>Players interact with a block-based world by mining, crafting, building,<br>fighting mobs, farming, using redstone mechanisms, enchanting items,<br>trading with villagers, and exploring dimensions such as the Overworld,<br>Nether, and End.<br>&lt;/Game Description&gt;<br><br>&lt;Safety Guidelines&gt;<br>CSAM:<br>Never generate content involving sexual abuse or exploitation of children.<br><br>Dangerous Content:<br>Never provide instructions for weapons, explosives, poisons, self-harm, or illegal activities.<br><br>PII &amp; Demographic Data:<br>Never share or infer personal data (addresses, medical info, finances, IDs).<br><br>Sexually Explicit Content:<br>Never generate sexually explicit content.<br><br>Medical Advice:<br>Never give personalized or detailed medical advice.<br><br>Malicious Content:<br>Never assist with hacking, scamming, stealing, or other illegal acts.<br><br>Hate Speech:<br>Never promote violence, discrimination, or hatred against protected groups.<br><br>Harassment:<br>Never generate abusive, intimidating, or bullying content.<br><br>Violence and Gore:<br>Avoid graphic or gratuitous depictions of real-life violence or gore.<br>&lt;/Safety Guidelines&gt;<br><br>&lt;Response Rules&gt;<br>CRITICAL - Anti-Hallucination Rules:<br>- NEVER add information not present in the context, even if you &quot;know&quot; it from training.<br>- If the context says X is immune to fire, do NOT say X is weak to fire.<br>- Do NOT invent mechanics, numbers, or behaviors not explicitly stated in context.<br>- When unsure, say &quot;I don't have enough information&quot; instead of guessing.<br><br>Completeness Rules:<br>- Include ALL relevant details from the context (numbers, percentages, levels, ranges).<br>- Quote specific mechanics exactly as stated in context.<br>- Do not over-summarize — if context has 5 key facts, include all 5.<br><br>General Rules:<br>- Use only the provided context.<br>- If the context is empty or irrelevant, say you do not have enough information.<br>- If the question is not about Minecraft, refuse politely.<br>- If the question violates safety rules, refuse briefly.<br>- Keep answers factual and well-structured.<br>&lt;/Response Rules&gt;<br><br>&lt;few_shot_examples&gt;<br><br>Example 1 — Detailed factual answer (GOOD)<br>Context: Creepers have 20 health points. They chase players within 16 blocks. When within 3 blocks, they stop, hiss, flash, and explode after 1.5 seconds. The explosion destroys blocks and deals massive damage. When struck by lightning, a Creeper becomes charged with doubled explosion power.<br>Question: What is a Creeper and how does it attack?<br>Assistant: A Creeper is a hostile mob with 20 health points. It chases players within 16 blocks. When within 3 blocks of a player, it stops moving, hisses, flashes, and explodes after 1.5 seconds. The explosion destroys nearby blocks and deals massive damage. If struck by lightning, it becomes a charged Creeper with doubled explosion power.<br><br>Example 2 — Complete answer with numbers (GOOD)<br>Context: Diamond ore is found at level 15 or lower, most commonly between -50 and -64. Levels -58 and -59 are best for mining. Fortune III can yield up to 4 diamonds per ore block.<br>Question: Where do I find diamonds?<br>Assistant: Diamond ore is found at level 15 or lower, with the highest concentration between levels -50 and -64. The optimal mining levels are -58 and -59. Using Fortune III enchantment can yield up to 4 diamonds per ore block.<br><br>Example 3 — Avoiding hallucination (GOOD)<br>Context: The Ender Dragon has 200 health points. It is immune to fire, drowning, and poison. End crystals on obsidian pillars heal the dragon.<br>Question: How do I defeat the Ender Dragon?<br>Assistant: The Ender Dragon has 200 health points and is immune to fire, drowning, and poison. To defeat it, you must destroy the End crystals on obsidian pillars that heal the dragon, then attack the dragon directly.<br><br>Example 4 — Irrelevant context retrieved<br>Context: Creepers are hostile mobs that explode when close to the player.<br>Question: How do I build a Nether portal?<br>Assistant: I don't have enough information in the provided context to answer this question.<br><br>Example 5 — No context retrieved<br>Context:<br>Question: What does redstone do?<br>Assistant: I don't have enough information in the provided context to answer this question.<br><br>Example 6 — Not about Minecraft<br>Context:<br>Question: Who won the World Cup in 2014?<br>Assistant: I can only help with questions related to Minecraft.<br><br>Example 7 — Safety violation<br>Context:<br>Question: How do I make a real explosive like TNT?<br>Assistant: I can't help with that request.<br><br>Example 8 — Gibberish / meaningless<br>Context:<br>Question: asdjklqwe 123??<br>Assistant: I don't understand the question. Please ask something related to Minecraft.<br><br>&lt;/few_shot_examples&gt;<br><br>Use the following context to answer the player question.<br>It contains retrieved information from Minecraft-related sources.<br>Extract and include ALL relevant facts, numbers, and mechanics from the context.<br><br>Context:<br>{context}<br><br>Question to answer:<br></div>
            </div>
        </div>

        <!-- Server Config Modal -->
        <div id="serverConfigModal" class="modal-overlay" onclick="if(event.target===this)this.classList.remove('show')">
            <div class="modal-content">
                <button class="modal-close" onclick="document.getElementById('serverConfigModal').classList.remove('show')">&times;</button>
                <h3>Server Configuration</h3>
                <div class="prompt-text" style="font-family: monospace; white-space: pre;">{<br>  &quot;version&quot;: &quot;0.1.2&quot;,<br>  &quot;port&quot;: 1234,<br>  &quot;system_port&quot;: 1235,<br>  &quot;speak&quot;: 0,<br>  &quot;embedding_model_name&quot;: &quot;all-MiniLM-L6-v2&quot;,<br>  &quot;rag_chunks_number&quot;: 3,<br>  &quot;rag_double_tower&quot;: false,<br>  &quot;rag_score_threshold&quot;: 0.4,<br>  &quot;llm_context_size&quot;: 8192,<br>  &quot;semantic_filter_tokens&quot;: 50,<br>  &quot;semantic_filter_threshold&quot;: 0.2,<br>  &quot;text_splitter_chunk_size&quot;: 1600,<br>  &quot;text_splitter_chunk_overlap&quot;: 320,<br>  &quot;text_splitter_separator&quot;: &quot;\n&quot;,<br>  &quot;prompt_player_template&quot;: &quot;- Refer to the player as: &quot;,<br>  &quot;prompt_personality_template&quot;: &quot;- You have the following personality: &quot;,<br>  &quot;prompt_tools_template&quot;: &quot;- All responses must go through the tools - no direct or natural language output&quot;,<br>  &quot;retrieve_tool_description&quot;: &quot;Search and return information from the game database and item craft database&quot;,<br>  &quot;retrieve_rag_description&quot;: &quot;Query to retrieval system&quot;,<br>  &quot;retrieve_craft_description&quot;: &quot;Item name to get craft information if it is needed&quot;,<br>  &quot;game_path&quot;: &quot;C:\\Users\\utente\\AppData\\Local\\Tryll\\server&quot;,<br>  &quot;log_dir&quot;: &quot;C:\\Users\\utente\\AppData\\Local\\Tryll\\logs&quot;<br>}</div>
            </div>
        </div>

        <!-- Metrics Cards -->
        <div class="metrics-grid">
            <div class="metric-card highlight">
                <div class="label">Total Score</div>
                <div class="value" style="color: #f59e0b">77/100</div>
                <div class="subtext">77.0% of maximum</div>
            </div>
            <div class="metric-card">
                <div class="label">Avg Score (1-50)</div>
                <div class="value" style="color: #f59e0b">38.5</div>
                <div class="subtext">Per question</div>
            </div>
            <div class="metric-card">
                <div class="label">RAG Triad</div>
                <div class="value" style="color: #f59e0b">63.8%</div>
                <div class="subtext">Context + Ground + Answer</div>
            </div>
            <div class="metric-card">
                <div class="label">Context Relevance</div>
                <div class="value" style="color: #f59e0b">66.7%</div>
                <div class="subtext">Chunk quality</div>
            </div>
            <div class="metric-card">
                <div class="label">Groundedness</div>
                <div class="value" style="color: #ef4444">58.0%</div>
                <div class="subtext">Answer backed by chunks</div>
            </div>
            <div class="metric-card">
                <div class="label">Faithfulness</div>
                <div class="value" style="color: #f59e0b">75.0%</div>
                <div class="subtext">Matches reference</div>
            </div>
        </div>

        <!-- Charts -->
        <div class="charts-section">
            <div class="chart-card">
                <h3>Scores by Question</h3>
                <div class="chart-container">
                    <canvas id="scoresChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <h3>Metrics Overview</h3>
                <div class="chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>
        </div>

        <div class="charts-section">
            <div class="chart-card" style="grid-column: span 2;">
                <h3>Metrics Breakdown by Question</h3>
                <div class="chart-container" style="height: 350px;">
                    <canvas id="metricsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Results Table -->
        <div class="results-section">
            <h2>Detailed Results</h2>
            <div style="overflow-x: auto;">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Question & Reference</th>
                            <th>AI Answer</th>
                            <th>Score</th>
                            <th>Metrics</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q1</td>
                            <td class="question-cell">
                                <div class="question-text">What is a Creeper and how does it attack?</div>
                                <div class="reference-text">Ref: A Creeper is a hostile mob that quietly approaches players and explodes. It has 20 health points and chases players within 16 blocks. When within 3 blocks of a player, it stops moving, hisses, flashes and expands, then explodes after 1.5 seconds. The explosion destroys blocks and deals massive damage. When struck by lightning, a Creeper becomes a charged creeper with twice the explosion power.</div>
                            </td>
                            <td class="answer-cell">A Creeper is a common hostile mob in Minecraft. It has 20 health points and is known for its distinctive appearance, which includes green skin and a long tail.<br><br>Creepers are naturally spawned in the Overworld on solid blocks with a light level of 0. They can spawn individually or in groups of four, but there is a density limit of five Creepers on the surface of the Overworld.<br><br>When a Creeper spots a player within its detection radius (which is 16 blocks when not crouching and 14 blocks when crouching), it will begin to chase the player. When the Creeper is within three blocks of the player, it will stop moving and prepare to attack.<br><br>A Creeper's attack involves exploding after 1.5 seconds (30 ticks). The explosion has a blast radius of 2 blocks in all directions from the center point of the explosion. Any block or entity that comes into contact with this area will be destroyed by the blast.<br><br>When struck by lightning, a Creeper becomes a Charged Creeper, which amplifies its explosion power and enables mob heads to be obtained from piglins, zombies, skeletons and other creepers it kills.<br><br>In summary, Creepers are hostile mobs in Minecraft that attack players by exploding after 1.5 seconds (30 ticks). Their detection radius is 16 blocks when not crouching and 14 blocks when crouching. When struck by lightning, a Creeper becomes a Charged Creeper, which amplifies its explosion power and enables mob heads to be obtained from piglins, zombies, skeletons and other creepers it kills.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(16, 185, 129, 0.1); color: #10b981; border: 1px solid #10b981;">42/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">CTX 56%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">GRD 80%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">FTH 70%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(1)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-1" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is mostly accurate and relevant but omits some key details and includes minor inaccuracies or unsupported information.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    - **CHUNK 1 (ID: creeper_1)**: Score 3 - Highly relevant. This chunk directly answers the question by describing what a Creeper is, how it approaches players, its explosion mechanics, health points, detection range, and the effect of lightning (charged creepers). It covers all key points in the Reference Answer.<br>     <br><br>    - **CHUNK 2 (ID: creeper_3)**: Score 2 - Relevant but partially helpful. While it provides useful details about charged creepers (e.g., explosion power, mob head drops), it focuses more on edge cases (e.g., retaliation mechanics, status effects) and less on the core behavior of a Creeper. It complements CHUNK 1 but isn't sufficient alone.<br>     <br><br>    - **CHUNK 3 (ID: creeper_head)**: Score 0 - Completely irrelevant. This chunk discusses the creeper head block (obtaining, placement, effects) and does not address the question about what a Creeper is or how it attacks.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - A Creeper is a common hostile mob in Minecraft.: SUPPORTED<br>  - It has 20 health points.: SUPPORTED<br>  - It is known for its distinctive appearance, which includes green skin and a long tail.: UNSUPPORTED<br>  - Creepers are naturally spawned in the Overworld on solid blocks with a light level of 0.: SUPPORTED<br>  - They can spawn individually or in groups of four.: SUPPORTED<br>  - There is a density limit of five Creepers on the surface of the Overworld.: SUPPORTED<br>  - When a Creeper spots a player within its detection radius (which is 16 blocks when not crouching and 14 blocks when crouching), it will begin to chase the player.: SUPPORTED<br>  - When the Creeper is within three blocks of the player, it will stop moving and prepare to attack.: SUPPORTED<br>  - A Creeper's attack involves exploding after 1.5 seconds (30 ticks).: SUPPORTED<br>  - The explosion has a blast radius of 2 blocks in all directions from the center point of the explosion.: UNSUPPORTED<br>  - Any block or entity that comes into contact with this area will be destroyed by the blast.: SUPPORTED<br>  - When struck by lightning, a Creeper becomes a Charged Creeper, which amplifies its explosion power.: SUPPORTED<br>  - A Charged Creeper enables mob heads to be obtained from piglins, zombies, skeletons and other creepers it kills.: SUPPORTED<br>  - Their detection radius is 16 blocks when not crouching and 14 blocks when crouching.: SUPPORTED<br>  - When struck by lightning, a Creeper becomes a Charged Creeper, which amplifies its explosion power and enables mob heads to be obtained from piglins, zombies, skeletons and other creepers it kills.: SUPPORTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': {'correct': ['Creeper is a hostile mob with 20 health points.', 'Quietly approaches players and explodes.', 'Detection radius is 16 blocks (14 when crouching).', 'Stops moving, hisses, and explodes after 1.5 seconds when within 3 blocks.', 'Charged Creeper is created by lightning and has amplified explosion power.', 'Charged Creepers enable mob heads to drop from certain mobs.'], 'incorrect_or_unsupported': [&quot;Blast radius of 2 blocks is not explicitly mentioned in the reference or chunks (reference says 'destroys blocks in the area').&quot;, &quot;Claim that explosion 'has a blast radius of 2 blocks in all directions' is not directly supported by the chunks or reference.&quot;, &quot;No mention of 'long tail' in reference or chunks (irrelevant detail).&quot;]}, 'completeness': {'missing_details': ['Does not mention the explosion destroys blocks and deals massive damage (key detail).', 'Does not specify the explosion power difference between regular and charged Creepers (e.g., twice the power).', 'Does not mention that the explosion can be halted if the player leaves the blast radius or kills the Creeper in time.', 'Does not clarify that Creepers do not spawn in mushroom fields, deep dark biomes, rivers, frozen rivers, or snowy plains.']}, 'hallucinations': ['Blast radius of 2 blocks is not explicitly stated in the reference or chunks (minor hallucination).', &quot;Mention of 'long tail' is irrelevant and not in the reference or chunks.&quot;], 'relevance': {'on_topic': 'Yes, the answer stays on topic and addresses the question about Creepers and their attack mechanics.', 'unnecessary_details': [&quot;Description of Creeper's appearance (green skin, long tail) is irrelevant to the question.&quot;]}, 'use_of_chunks': {'correctly_used': 'Mostly correct, but some details (e.g., blast radius) are not directly supported by the chunks.', 'unsupported_additions': &quot;Blast radius of 2 blocks and 'long tail' are not in the chunks or reference.&quot;}}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q2</td>
                            <td class="question-cell">
                                <div class="question-text">How do Arrows work in combat?</div>
                                <div class="reference-text">Ref: Arrows serve as ammunition for bows, crossbows, and dispensers. They can be crafted into spectral or tipped arrows for status effects. Arrows shot by players in Creative mode can always be picked up, but arrows from Infinity bows or Multishot crossbow extras cannot. Crossbows shoot slightly faster arrows (3.15 vs 3.0 for fully drawn bows). Critical arrows from fully charged bows deal bonus damage. Arrows can activate wooden buttons, pressure plates, and targets.</div>
                            </td>
                            <td class="answer-cell">Arrows are a type of ammunition used in Minecraft to deal damage to entities. Here's how they work in combat:<br><br>1. **Attacking entities**: Arrows can be shot at any entity, including mobs, players, and other objects.<br>2. **Damage calculation**: The damage dealt by an arrow is calculated based on the arrow's speed, the target's armor, and the type of arrow used (e.g., normal arrow, tipped arrow).<br>3. **Critical hits**: Arrows can deal critical hits to entities, which are indicated by a crit particle trail behind the arrow.<br>4. **Arrow penetration**: Some arrows, such as those with a high speed or using a Piercing enchantment, can pass through multiple entities before being consumed.<br>5. **Retrieval and despawning**: Once an arrow has been fired and hits its target, it will either be destroyed (e.g., if the target is a mob that is immune to arrows) or remain in place until it despawns after 1 minute.<br><br>These are the key mechanics governing how arrows work in combat.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b; border: 1px solid #f59e0b;">35/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">CTX 78%</span>
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">GRD 36%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">FTH 80%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(2)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-2" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is mostly accurate but lacks key details from the reference and chunks, and includes minor unsupported generalizations.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    - **Chunk 1 (ID: piercing)**: Score 1. While it provides detailed information about the Piercing enchantment for crossbows, this is tangential to the core question about how arrows work in combat. It does not address key points like arrow types, retrieval rules, speed differences, or activation of blocks, which are central to the Reference Answer.<br><br>    - **Chunk 2 (ID: arrow_3)**: Score 3. This chunk is highly relevant as it directly addresses multiple aspects of the Reference Answer. It covers:<br>      - Arrow behavior (sticking into blocks, despawning, retrieval).<br>      - Interaction with blocks (activating wooden buttons, pressure plates, targets).<br>      - Damage scaling and crit mechanics.<br>      - Fire effects and other miscellaneous behaviors (e.g., breaking chorus flowers or decorated pots).<br>      This chunk alone could form the backbone of a correct answer.<br><br>    - **Chunk 3 (ID: arrow_1)**: Score 3. This chunk is also highly relevant and complements Chunk 2. It covers:<br>      - Arrow types (spectral, tipped) and crafting.<br>      - Retrieval rules (Creative vs. Survival, Infinity bows, Multishot extras).<br>      - Speed differences between bows and crossbows.<br>      - Critical arrows and their damage.<br>      - Basic spawning and velocity mechanics.<br>      This chunk provides foundational information that aligns closely with the Reference Answer.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - Arrows are a type of ammunition used in Minecraft to deal damage to entities.: SUPPORTED<br>  - Arrows can be shot at any entity, including mobs, players, and other objects.: SUPPORTED<br>  - The damage dealt by an arrow is calculated based on the arrow's speed, the target's armor, and the type of arrow used (e.g., normal arrow, tipped arrow).: SUPPORTED<br>  - Arrows can deal critical hits to entities, which are indicated by a crit particle trail behind the arrow.: SUPPORTED<br>  - Some arrows, such as those with a high speed or using a Piercing enchantment, can pass through multiple entities before being consumed.: SUPPORTED<br>  - Once an arrow has been fired and hits its target, it will either be destroyed (e.g., if the target is a mob that is immune to arrows) or remain in place until it despawns after 1 minute.: UNSUPPORTED<br>  - Arrows shot by players in Creative mode can always be picked up (not mentioned in AI answer but relevant to completeness).: UNSUPPORTED (omitted)<br>  - Crossbows shoot slightly faster arrows than bows (3.15 vs 3.0 for fully drawn bows).: UNSUPPORTED (omitted)<br>  - Arrows can activate wooden buttons, pressure plates, and targets.: UNSUPPORTED (omitted)<br>  - Arrows can be crafted into spectral or tipped arrows for status effects.: UNSUPPORTED (omitted)<br>  - Arrows from Infinity bows or Multishot crossbow extras cannot be picked up.: UNSUPPORTED (omitted)
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': {'correct': ['Arrows are ammunition for dealing damage to entities.', 'Critical hits are indicated by crit particles and deal bonus damage.', 'Piercing enchantment allows arrows to pass through multiple entities.', 'Arrows despawn after 1 minute if stuck in blocks.'], 'incorrect_or_unsupported': ['Damage calculation is overly simplified (no mention of speed scaling, NBT tags, or dispenser exceptions).', 'No distinction between bow/crossbow arrow speeds or damage ranges.', 'No mention of arrow retrieval rules (e.g., Creative mode, Infinity bows, Multishot extras).', 'No details on arrow interactions with blocks (buttons, pressure plates, targets).']}, 'completeness': {'missing_key_details': ['No mention of spectral/tipped arrows or status effects.', 'No explanation of arrow speed differences (3.15 vs 3.0 for crossbows/bows).', 'No details on arrow retrieval restrictions (e.g., mob-shot arrows, Infinity bows).', 'No clarification on arrow interactions with specific blocks (e.g., wooden buttons, targets).', 'No note about arrows breaking chorus flowers/decorated pots.']}, 'hallucinations': {'present': False, 'details': &quot;No outright false information, but some vague statements (e.g., 'damage calculation based on target's armor') are not explicitly supported by the chunks/reference.&quot;}, 'relevance': {'on_topic': True, 'issues': 'Focuses too narrowly on damage mechanics while omitting broader combat interactions (e.g., block activation, retrieval rules).'}, 'chunk_usage': {'used_correctly': ['Mentions critical hits (from Chunk 3) and Piercing (from Chunk 1).'], 'ignored': ['Arrow retrieval rules (Chunk 3).', 'Block interactions (Chunk 2).', 'Speed/damage specifics (Chunk 2/3).']}}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>RAG Evaluation Report | Powered by Tryll Engine Inc.</p>
        </div>
    </div>

    <script>
        // Toggle details row visibility
        function toggleDetails(id) {
            const row = document.getElementById('details-row-' + id);
            const btn = event.target;
            if (row.style.display === 'none') {
                row.style.display = 'table-row';
                btn.textContent = 'Hide Details';
            } else {
                row.style.display = 'none';
                btn.textContent = 'Show Details';
            }
        }

        // Scores Bar Chart
        const scoresCtx = document.getElementById('scoresChart').getContext('2d');
        new Chart(scoresCtx, {
            type: 'bar',
            data: {
                labels: ["Q1", "Q2"],
                datasets: [{
                    label: 'Score',
                    data: [42, 35],
                    backgroundColor: [42, 35].map(score => {
                        if (score >= 40) return 'rgba(16, 185, 129, 0.7)';
                        if (score >= 25) return 'rgba(245, 158, 11, 0.7)';
                        return 'rgba(239, 68, 68, 0.7)';
                    }),
                    borderColor: [42, 35].map(score => {
                        if (score >= 40) return '#10b981';
                        if (score >= 25) return '#f59e0b';
                        return '#ef4444';
                    }),
                    borderWidth: 2,
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 50,
                        grid: { color: 'rgba(255,255,255,0.08)' },
                        ticks: { color: 'rgba(255,255,255,0.55)' }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { color: 'rgba(255,255,255,0.55)' }
                    }
                }
            }
        });

        // Radar Chart
        const radarCtx = document.getElementById('radarChart').getContext('2d');
        new Chart(radarCtx, {
            type: 'radar',
            data: {
                labels: ['Context Relevance', 'Groundedness', 'Answer Relevance', 'Faithfulness'],
                datasets: [{
                    label: 'Average Metrics',
                    data: [66.7, 58.0, 66.7, 75.0],
                    backgroundColor: 'rgba(59, 130, 246, 0.15)',
                    borderColor: '#3B82F6',
                    borderWidth: 2,
                    pointBackgroundColor: '#3B82F6',
                    pointBorderColor: '#F6F0EB',
                    pointHoverBackgroundColor: '#F6F0EB',
                    pointHoverBorderColor: '#3B82F6'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        grid: { color: 'rgba(255,255,255,0.08)' },
                        angleLines: { color: 'rgba(255,255,255,0.08)' },
                        pointLabels: { color: 'rgba(255,255,255,0.85)', font: { size: 11, weight: 500 } },
                        ticks: {
                            color: 'rgba(255,255,255,0.5)',
                            backdropColor: 'transparent'
                        }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // Metrics Breakdown Chart
        const metricsCtx = document.getElementById('metricsChart').getContext('2d');
        new Chart(metricsCtx, {
            type: 'bar',
            data: {
                labels: ["Q1", "Q2"],
                datasets: [
                    {
                        label: 'Context Relevance',
                        data: [55.7, 77.7],
                        backgroundColor: 'rgba(59, 130, 246, 0.7)',
                        borderRadius: 4
                    },
                    {
                        label: 'Groundedness',
                        data: [80.0, 36.0],
                        backgroundColor: 'rgba(35, 46, 65, 0.9)',
                        borderRadius: 4
                    },
                    {
                        label: 'Answer Relevance',
                        data: [66.7, 66.7],
                        backgroundColor: 'rgba(246, 240, 235, 0.7)',
                        borderRadius: 4
                    },
                    {
                        label: 'Faithfulness',
                        data: [70.0, 80.0],
                        backgroundColor: 'rgba(16, 185, 129, 0.7)',
                        borderRadius: 4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { color: 'rgba(255,255,255,0.85)' }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        grid: { color: 'rgba(255,255,255,0.08)' },
                        ticks: { color: 'rgba(255,255,255,0.55)' }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { color: 'rgba(255,255,255,0.55)' }
                    }
                }
            }
        });
    </script>
</body>
</html>
