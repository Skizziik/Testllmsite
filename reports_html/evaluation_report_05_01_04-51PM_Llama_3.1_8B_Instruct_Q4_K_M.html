<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG Evaluation Report</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000000;
            background-image: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(59, 130, 246, 0.15), transparent);
            min-height: 100vh;
            color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #F6F0EB;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: -0.02em;
        }

        .header .subtitle {
            color: rgba(255, 255, 255, 0.65);
            font-size: 1.1rem;
            font-weight: 450;
        }

        /* Metrics Cards */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(59, 130, 246, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .metric-card .label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.55);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .metric-card .value {
            font-size: 1.8rem;
            font-weight: 650;
            margin-bottom: 8px;
            word-break: break-word;
        }

        .metric-card .subtext {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.45);
        }

        .metric-card.highlight {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(35, 46, 65, 0.4));
            border-color: rgba(59, 130, 246, 0.25);
        }

        /* Charts Section */
        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 900px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
        }

        .chart-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .chart-card h3 {
            margin-bottom: 20px;
            color: #F6F0EB;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        /* Results Table */
        .results-section {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            margin-bottom: 30px;
        }

        .results-section h2 {
            margin-bottom: 20px;
            color: #F6F0EB;
            font-weight: 600;
        }

        .results-table {
            width: 100%;
            border-collapse: collapse;
        }

        .results-table th {
            background: rgba(35, 46, 65, 0.5);
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.85);
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .results-table td {
            padding: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: top;
        }

        .results-table tr:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .question-cell {
            max-width: 300px;
        }

        .question-text {
            font-weight: 500;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
        }

        .reference-text {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }

        .answer-cell {
            max-width: 400px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.75);
        }

        .score-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .metric-pill {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin: 2px;
            font-weight: 500;
        }

        .metrics-cell {
            min-width: 200px;
        }

        /* Expandable Details */
        .details-toggle {
            background: rgba(59, 130, 246, 0.15);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #3B82F6;
            padding: 6px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .details-toggle:hover {
            background: #3B82F6;
            color: #ffffff;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .details-content {
            display: none;
            margin-top: 12px;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.75);
        }

        .details-content.show {
            display: block;
        }

        /* Details Row - separate row for expanded details */
        .details-row {
            background: transparent;
        }

        .details-row td {
            padding: 0 !important;
            border-top: none;
        }

        .details-content-expanded {
            padding: 16px 20px;
            background: rgba(35, 46, 65, 0.3);
            border-radius: 0 0 8px 8px;
            margin: 0 8px 8px 8px;
            border: 1px solid rgba(59, 130, 246, 0.1);
            border-top: none;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
        }

        .detail-section {
            margin-bottom: 8px;
            background: rgba(0, 0, 0, 0.2);
            padding: 12px 14px;
            border-radius: 6px;
            border-left: 2px solid rgba(59, 130, 246, 0.4);
            font-size: 0.85rem;
            line-height: 1.5;
            color: rgba(255, 255, 255, 0.8);
        }

        .detail-section strong {
            color: rgba(255, 255, 255, 0.55);
            display: block;
            margin-bottom: 6px;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px 20px;
            color: rgba(255, 255, 255, 0.45);
            font-size: 0.85rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            margin-top: 20px;
        }

        .footer a {
            color: #3B82F6;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Prompt Modal */
        .prompt-btn {
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.8);
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
            margin-top: 15px;
        }

        .prompt-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(59, 130, 246, 0.5);
            color: #3B82F6;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.show {
            display: flex;
        }

        .modal-content {
            background: #0f1419;
            border-radius: 12px;
            padding: 24px;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(59, 130, 246, 0.2);
            position: relative;
        }

        .modal-content h3 {
            color: #F6F0EB;
            margin-bottom: 16px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.6);
            width: 32px;
            height: 32px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.4);
            color: #ef4444;
        }

        .prompt-text {
            background: rgba(0, 0, 0, 0.4);
            padding: 16px;
            border-radius: 8px;
            font-family: 'JetBrains Mono', 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.8);
            white-space: pre-wrap;
            line-height: 1.6;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>RAG Evaluation Report</h1>
            <p class="subtitle">Generated: 2026-01-05 16:51 | Questions: 10 | Model: Llama 3.1 8B Instruct (Q4_K_M)</p>
            <button class="prompt-btn" onclick="document.getElementById('promptModal').classList.add('show')">Show Test Config</button>
        </div>

        <!-- Prompt Modal -->
        <div id="promptModal" class="modal-overlay" onclick="if(event.target===this)this.classList.remove('show')">
            <div class="modal-content">
                <button class="modal-close" onclick="document.getElementById('promptModal').classList.remove('show')">&times;</button>
                <h3>Test Configuration</h3>
                <div class="model-info" style="margin-bottom: 16px; padding: 12px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; border-left: 3px solid #3B82F6;">
                    <strong style="color: #3B82F6;">Model:</strong> <span style="color: rgba(255,255,255,0.9);">Llama 3.1 8B Instruct (Q4_K_M)</span>
                </div>
                <h4 style="color: rgba(255,255,255,0.7); margin-bottom: 8px; font-size: 0.9rem;">System Prompt:</h4>
                <div class="prompt-text">You are a Minecraft assistant. Answer questions ONLY using the context below. Do NOT use your own knowledge.<br><br>Context information:<br>---------------------<br>{context}<br>---------------------<br><br>RULES:<br>- Use ONLY facts from the context above<br>- If the answer is not in the context, say: &quot;I don't have this information in my knowledge base.&quot;<br>- Do NOT make up information<br>- Do NOT use your training data about Minecraft<br>- Be concise and direct<br><br>Query:</div>
            </div>
        </div>

        <!-- Metrics Cards -->
        <div class="metrics-grid">
            <div class="metric-card highlight">
                <div class="label">Total Score</div>
                <div class="value" style="color: #f59e0b">348/500</div>
                <div class="subtext">69.6% of maximum</div>
            </div>
            <div class="metric-card">
                <div class="label">Avg Score (1-50)</div>
                <div class="value" style="color: #f59e0b">34.8</div>
                <div class="subtext">Per question</div>
            </div>
            <div class="metric-card">
                <div class="label">RAG Triad</div>
                <div class="value" style="color: #f59e0b">74.3%</div>
                <div class="subtext">Context + Ground + Answer</div>
            </div>
            <div class="metric-card">
                <div class="label">Context Relevance</div>
                <div class="value" style="color: #10b981">80.0%</div>
                <div class="subtext">Chunk quality</div>
            </div>
            <div class="metric-card">
                <div class="label">Groundedness</div>
                <div class="value" style="color: #f59e0b">79.4%</div>
                <div class="subtext">Answer backed by chunks</div>
            </div>
            <div class="metric-card">
                <div class="label">Faithfulness</div>
                <div class="value" style="color: #10b981">80.9%</div>
                <div class="subtext">Matches reference</div>
            </div>
        </div>

        <!-- Charts -->
        <div class="charts-section">
            <div class="chart-card">
                <h3>Scores by Question</h3>
                <div class="chart-container">
                    <canvas id="scoresChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <h3>Metrics Overview</h3>
                <div class="chart-container">
                    <canvas id="radarChart"></canvas>
                </div>
            </div>
        </div>

        <div class="charts-section">
            <div class="chart-card" style="grid-column: span 2;">
                <h3>Metrics Breakdown by Question</h3>
                <div class="chart-container" style="height: 350px;">
                    <canvas id="metricsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Results Table -->
        <div class="results-section">
            <h2>Detailed Results</h2>
            <div style="overflow-x: auto;">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Question & Reference</th>
                            <th>AI Answer</th>
                            <th>Score</th>
                            <th>Metrics</th>
                            <th>Details</th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q1</td>
                            <td class="question-cell">
                                <div class="question-text">What is a Creeper and how does it attack?</div>
                                <div class="reference-text">Ref: A Creeper is a hostile mob that quietly approaches players and explodes. It has 20 health points and chases players within 16 blocks. When within 3 blocks of a player, it stops moving, hisses, flashes and expands, then explodes after 1.5 seconds. The explosion destroys blocks and deals massive damage. When struck by lightning, a Creeper becomes a charged creeper with twice the explosion power.</div>
                            </td>
                            <td class="answer-cell">A Creeper is a common hostile mob in Minecraft. It has a distinctive appearance and attacks by exploding, which can destroy blocks and deal significant damage to players.<br><br>When a Creeper detects a player within its 16-block radius, it will start chasing the player. As it gets closer to the player (within a 3-block radius), the Creeper will stop moving, hiss, flash, and expand before exploding after 1.5 seconds (30 ticks).</td>
                            <td>
                                <span class="score-badge" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b; border: 1px solid #f59e0b;">38/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">CTX 83%</span>
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">GRD 50%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">FTH 100%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(1)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-1" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is mostly accurate but lacks several key details about the Creeper's behavior, health points, and charged variant.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    **Chunk 1 (creeper_1) - Score: 3 (Highly relevant)**<br>    - Directly answers the question by defining what a Creeper is (a hostile mob that quietly approaches players and explodes).<br>    - Covers key details from the Reference Answer: health points (20, implied by damage context), chase range (16 blocks), behavior when within 3 blocks (hisses, flashes, explodes after 1.5 seconds), explosion effects, and the charged creeper variant (lightning-struck, twice the power).<br>    - Provides additional useful context (e.g., spawning conditions, retaliation mechanics) without detracting from the core answer.<br><br>    **Chunk 2 (creeper_3) - Score: 2 (Relevant)**<br>    - Partially helpful but focuses more on edge cases (e.g., retaliation to mobs, status effects, mob head drops) and charged creeper mechanics (e.g., explosion power, summoning commands).<br>    - While it reinforces the charged creeper detail (already covered in Chunk 1), it adds less critical information for the *specific* question asked. The core answer is already well-covered by Chunk 1.<br>    - Could lead to a correct answer but includes extraneous details that might dilute the response.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - A Creeper is a common hostile mob in Minecraft.: SUPPORTED<br>  - It has a distinctive appearance and attacks by exploding, which can destroy blocks and deal significant damage to players.: SUPPORTED<br>  - When a Creeper detects a player within its 16-block radius, it will start chasing the player.: SUPPORTED<br>  - As it gets closer to the player (within a 3-block radius), the Creeper will stop moving, hiss, flash, and expand before exploding after 1.5 seconds (30 ticks).: SUPPORTED<br>  - The Creeper has 20 health points.: UNSUPPORTED<br>  - The explosion power of a charged creeper is mentioned.: UNSUPPORTED<br>  - Creepers chase players within 14 blocks when crouching.: UNSUPPORTED<br>  - Creepers do not attack other mobs without provocation.: UNSUPPORTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': {'correct': ['Creeper is a hostile mob in Minecraft', 'Attacks by exploding, destroying blocks and dealing damage', 'Chases players within 16-block radius', 'Stops, hisses, flashes, and explodes within 3 blocks after 1.5 seconds'], 'missing': ['Health points (20 HP)', 'Charged creeper mechanics (lightning strike, doubled explosion power)', 'Proximity-based explosion damage details', 'Light level spawning conditions (0)', 'Density limit and group spawning details']}, 'completeness': &quot;The answer addresses the core question but omits critical details about the Creeper's health, charged variant, and environmental interactions (e.g., lightning).&quot;, 'hallucinations': 'None detected. All provided information aligns with the reference and chunks.', 'relevance': 'The answer stays strictly on-topic but is overly concise compared to the reference.', 'chunk_usage': 'The AI used the chunks correctly but did not extract all available details (e.g., charged creeper, health, spawning conditions).'}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q2</td>
                            <td class="question-cell">
                                <div class="question-text">How do you defeat the Ender Dragon?</div>
                                <div class="reference-text">Ref: The Ender Dragon is a boss mob in the End dimension with 200 health points. To defeat it, players must destroy the End crystals on obsidian pillars that heal the dragon. The dragon takes damage from explosions and player attacks, but is immune to fire, drowning, poison, and status effects. Hitting its head deals more damage than other body parts. After defeating the dragon, it drops experience points and activates the exit portal.</div>
                            </td>
                            <td class="answer-cell">To defeat the Ender Dragon, you must first gather enough resources to craft essential items such as enchanted diamond swords and armor. <br><br>Once equipped with the necessary gear, you can enter The End by using Eyes of Ender on a Stronghold in the Overworld.<br><br>In The End, locate the exit portal made of obsidian blocks. You will need 12 obsidian blocks to complete this structure.<br><br>The Ender Dragon is a flying hostile boss mob found when first entering The End. It has 200 health points and can attack players using its wings or by shooting fireballs that create damaging effect clouds.<br><br>To defeat the Ender Dragon, you must damage it enough for its health to fall below zero. You can achieve this by attacking the dragon with your sword while avoiding taking too much damage from its attacks. <br><br>Note: The game does not specify any unique strategy for defeating the Ender Dragon, but rather encourages players to use their skills and abilities to overcome the challenge.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(239, 68, 68, 0.1); color: #ef4444; border: 1px solid #ef4444;">28/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">CTX 67%</span>
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">GRD 44%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">FTH 56%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(2)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-2" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is partially correct but misses critical details about defeating the Ender Dragon and includes unnecessary or incorrect information.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    **Chunk 1 (ender_dragon_1): Score 2**<br>    - **Relevant but incomplete**: This chunk provides background on the Ender Dragon (e.g., its role as a boss mob, spawning mechanics, and post-defeat events) but does not explicitly explain *how* to defeat it. It mentions End crystals and their role in healing the dragon, which is indirectly useful, but lacks key details like damage methods (e.g., explosions, player attacks) or immunity to status effects.<br>    - **Could lead to partial correctness**: A user might infer that destroying End crystals is important, but the chunk doesn’t clarify how to deal damage or the dragon’s vulnerabilities.<br><br>    **Chunk 2 (ender_dragon_4): Score 2**<br>    - **Relevant but tangential**: This chunk focuses on the dragon’s attack patterns and behavior states (e.g., circling, strafing, perching) rather than how to defeat it. It mentions the dragon’s damage immunity to arrows/tridents while perching, which is a minor detail from the Reference Answer, but the core steps (e.g., destroying crystals, attacking the head) are missing.<br>    - **Could mislead**: The emphasis on attack patterns might distract from the actual defeat strategy, though it does reinforce the dragon’s complexity as a boss.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - To defeat the Ender Dragon, you must first gather enough resources to craft essential items such as enchanted diamond swords and armor.: UNSUPPORTED<br>  - Once equipped with the necessary gear, you can enter The End by using Eyes of Ender on a Stronghold in the Overworld.: UNSUPPORTED<br>  - In The End, locate the exit portal made of obsidian blocks.: SUPPORTED<br>  - You will need 12 obsidian blocks to complete this structure.: UNSUPPORTED<br>  - The Ender Dragon is a flying hostile boss mob found when first entering The End.: SUPPORTED<br>  - It has 200 health points and can attack players using its wings or by shooting fireballs that create damaging effect clouds.: SUPPORTED<br>  - To defeat the Ender Dragon, you must damage it enough for its health to fall below zero.: SUPPORTED<br>  - You can achieve this by attacking the dragon with your sword while avoiding taking too much damage from its attacks.: SUPPORTED<br>  - Note: The game does not specify any unique strategy for defeating the Ender Dragon, but rather encourages players to use their skills and abilities to overcome the challenge.: CONTRADICTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': {'correct': ['The Ender Dragon is a flying hostile boss mob in The End with 200 health points.', 'Players must enter The End via Eyes of Ender and a Stronghold.', 'The dragon attacks using wings and fireballs.'], 'incorrect_or_misleading': ['The answer claims the game does not specify a unique strategy, which contradicts the reference and chunks (e.g., destroying End crystals is critical).', 'The mention of needing 12 obsidian blocks to complete the exit portal is irrelevant to defeating the dragon and not mentioned in the reference or chunks.']}, 'completeness': {'missing_critical_details': ['No mention of destroying End crystals on obsidian pillars to prevent healing.', &quot;No mention of the dragon's immunity to fire, drowning, poison, or status effects.&quot;, &quot;No mention of dealing more damage by hitting the dragon's head.&quot;, &quot;No mention of the dragon's behavior states (e.g., circling, strafing, perching).&quot;], 'unnecessary_details': [&quot;Gathering resources and crafting enchanted diamond swords/armor is not required to defeat the dragon (though helpful, it's not part of the core strategy).&quot;, 'The exit portal structure details are irrelevant to the question.']}, 'hallucinations': {'present': ['The claim that the game does not specify a unique strategy is false (the reference and chunks clearly outline key strategies).'], 'absent': ['No major fabricated mechanics (e.g., no invented items or attacks).']}, 'relevance': {'on_topic': 'Mostly stays on topic but includes irrelevant details (e.g., obsidian blocks for the exit portal).', 'off_topic': 'The focus on resource gathering and portal construction detracts from the core question.'}, 'use_of_chunks': {'underutilized': &quot;The AI did not leverage critical information from the chunks, such as the role of End crystals, the dragon's behavior states, or damage mechanics.&quot;, 'unsupported_additions': 'Added details about resource gathering and portal construction not supported by the chunks or reference.'}}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q3</td>
                            <td class="question-cell">
                                <div class="question-text">Where can I find diamonds and what are they used for?</div>
                                <div class="reference-text">Ref: Diamonds can be obtained from diamond ore using an iron pickaxe or better. Diamond ore is found at level 15 or lower, most commonly between -50 and -64. Levels -58 and -59 are the best for mining. Fortune enchantment increases diamond drops up to 4 with Fortune III. Diamonds are used to craft high-tier armor, tools, and enchanting tables. They can also be used to select beacon powers and repair diamond equipment.</div>
                            </td>
                            <td class="answer-cell">You can find diamonds by mining diamond ore with an iron pickaxe or better. Diamond ore is found at level 15 or lower, most commonly between -50 and -64.<br><br>Diamonds are mainly used to craft high-tier armor and equipment. They can also be used to power a beacon, repair items in an anvil or grindstone, and select powers from a beacon.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(16, 185, 129, 0.1); color: #10b981; border: 1px solid #10b981;">42/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">CTX 83%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">GRD 100%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">FTH 83%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(3)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-3" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is mostly accurate and relevant but omits some key details about mining levels, Fortune enchantment effects, and specific uses like crafting enchanting tables or duplicating smithing templates.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    - **CHUNK 1 (ID: diamond)**: Score 3 - Highly relevant. This chunk directly answers both parts of the question:<br>      1. **Where to find diamonds**: It specifies diamond ore mining (levels -50 to -64, best at -58/-59), tools required (iron pickaxe or better), and alternative sources (loot chests, vaults).<br>      2. **Uses of diamonds**: It covers crafting high-tier armor/tools, enchanting tables, beacon powers, and repairing diamond equipment. All key points from the Reference Answer are included.<br><br>    - **CHUNK 2 (ID: block_of_diamond)**: Score 2 - Relevant but partially helpful. While it explains the *block* of diamond (storage, beacon powering), it does not address the core question about *diamonds* themselves (e.g., mining, crafting uses). The information is related but not directly useful for the question's focus.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - You can find diamonds by mining diamond ore with an iron pickaxe or better.: SUPPORTED<br>  - Diamond ore is found at level 15 or lower, most commonly between -50 and -64.: SUPPORTED<br>  - Diamonds are mainly used to craft high-tier armor and equipment.: SUPPORTED<br>  - They can also be used to power a beacon.: SUPPORTED<br>  - They can also be used to repair items in an anvil or grindstone.: SUPPORTED<br>  - They can also be used to select powers from a beacon.: SUPPORTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': {'correct': 'The AI correctly states that diamonds are found by mining diamond ore with an iron pickaxe or better and that diamond ore is found at level 15 or lower, most commonly between -50 and -64. It also correctly lists uses like crafting high-tier armor, powering beacons, repairing items, and selecting beacon powers.', 'incorrect': 'No factual inaccuracies, but the AI does not mention the optimal mining levels (-58 and -59) or the effect of Fortune enchantment (up to 4 diamonds with Fortune III).'}, 'completeness': {'missing_details': ['Optimal mining levels (-58 and -59) are not mentioned.', &quot;Fortune enchantment's effect on diamond drops is omitted.&quot;, 'Specific uses like crafting enchanting tables or duplicating smithing templates are not included.', &quot;The reference mentions diamonds can be used to repair diamond equipment, but the AI generalizes this to 'repair items.'&quot;], 'covered': 'The AI covers the basic methods of obtaining diamonds and their primary uses.'}, 'hallucinations': 'None detected. All information is supported by the chunks or reference.', 'relevance': 'The answer stays on topic and directly addresses the question.', 'chunk_usage': 'The AI uses the chunks effectively but does not include all available details, particularly those in CHUNK 1 about mining specifics and additional uses.'}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q4</td>
                            <td class="question-cell">
                                <div class="question-text">What is an Allay and what does it do?</div>
                                <div class="reference-text">Ref: An Allay is a small flying passive mob that spawns in pillager outposts and woodland mansions. When given an item by a player, it follows them and collects dropped instances of the same item, delivering them to the player. If it hears a note block play, it delivers items to the note block instead for 30 seconds. Allays can be duplicated by giving them an amethyst shard while they are dancing near a playing jukebox.</div>
                            </td>
                            <td class="answer-cell">An Allay is a small flying passive mob. When given an item by a player, the Allay starts following that player and seeks out dropped versions of the same item to deliver them to the player.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b; border: 1px solid #f59e0b;">35/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">CTX 100%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">GRD 100%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">FTH 100%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(4)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-4" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is factually accurate but lacks completeness, omitting key details about the Allay's spawning locations, note block interaction, and duplication mechanics.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    - **CHUNK 1 (allay_1)**: Highly relevant (score: 3). This chunk directly answers the question by providing key details from the Reference Answer:<br>      1. It defines the Allay as a small flying passive mob.<br>      2. It specifies the spawn locations (pillager outposts and woodland mansions).<br>      3. It explains the Allay's behavior (following the player, collecting dropped items, and delivering them).<br>      4. It mentions the interaction with note blocks (delivering items to them for 30 seconds).<br>      5. It hints at duplication (though the full details are in Chunk 2).<br>      This chunk alone could almost fully answer the question.<br><br>    - **CHUNK 2 (allay_2)**: Highly relevant (score: 3). While this chunk focuses more on edge cases and mechanics (e.g., duplication, cooldowns, portal behavior), it still contains critical information from the Reference Answer:<br>      1. It explicitly describes the duplication process (giving an amethyst shard while dancing near a jukebox), which is part of the Reference Answer.<br>      2. It reinforces the Allay's behavior (e.g., following players, note block interactions).<br>      This chunk complements Chunk 1 and ensures the answer is complete.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - An Allay is a small flying passive mob.: SUPPORTED<br>  - When given an item by a player, the Allay starts following that player.: SUPPORTED<br>  - The Allay seeks out dropped versions of the same item to deliver them to the player.: SUPPORTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': 'The AI answer correctly states that an Allay is a small flying passive mob that follows a player when given an item and collects dropped instances of the same item. This aligns with both the REFERENCE and CHUNKS.', 'completeness': &quot;The answer is incomplete. It misses critical details such as the Allay's spawning locations (pillager outposts and woodland mansions), its interaction with note blocks, and the ability to duplicate using an amethyst shard while dancing near a jukebox. These are all major aspects of the Allay's functionality.&quot;, 'hallucinations': 'No hallucinations detected. The AI answer does not include any invented information not present in the REFERENCE or CHUNKS.', 'relevance': 'The answer stays on topic and directly addresses the question, though it is overly simplistic.', 'use_of_chunks': &quot;The AI answer does not fully utilize the provided CHUNKS, which contain detailed information about the Allay's behavior, spawning, and interactions. The answer could have been much more comprehensive by incorporating these details.&quot;}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q5</td>
                            <td class="question-cell">
                                <div class="question-text">How does the Absorption effect work?</div>
                                <div class="reference-text">Ref: Absorption is a status effect that adds extra yellow hearts above the normal health bar. These absorption health points are depleted first when taking damage. Unlike regular health, absorption hearts cannot be replenished by natural regeneration or other effects and vanish when the effect ends. The Ender Dragon is completely immune to this effect.</div>
                            </td>
                            <td class="answer-cell">The Absorption effect pads the health bar with extra yellow hearts above the normal health bar. When the player takes damage, the absorption health points are depleted first, followed by the standard health points.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b; border: 1px solid #f59e0b;">35/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">CTX 100%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">GRD 100%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">FTH 100%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(5)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-5" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is factually accurate but lacks several key details from the reference and chunks, resulting in an incomplete response.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    - **Chunk 1 (ID: absorption)** is **highly relevant (score: 3)** because it directly contains all the key information mentioned in the Reference Answer:<br>      1. Absorption adds extra yellow hearts above the normal health bar.<br>      2. These absorption health points are depleted first when taking damage.<br>      3. Absorption hearts cannot be replenished by natural regeneration or other effects and vanish when the effect ends.<br>      4. The Ender Dragon is completely immune to this effect.<br>      The chunk also provides additional details (e.g., negative absorption levels, wither's immunity nuances) that are not required for the Reference Answer but do not detract from correctness. Thus, it fully answers the question without leading to an incorrect interpretation.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - The Absorption effect pads the health bar with extra yellow hearts above the normal health bar.: SUPPORTED<br>  - When the player takes damage, the absorption health points are depleted first, followed by the standard health points.: SUPPORTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': 'The AI answer correctly states that Absorption adds extra yellow hearts above the normal health bar and that these are depleted first when taking damage. This aligns with both the reference and chunks.', 'completeness': 'The answer is incomplete. It omits critical details such as: (1) absorption hearts cannot be replenished by natural regeneration or other effects, (2) absorption hearts vanish when the effect ends, and (3) the Ender Dragon is immune to the effect. These are all present in the reference and chunks.', 'hallucinations': 'No hallucinations detected. The AI answer does not introduce any unsupported or invented information.', 'relevance': 'The answer stays on topic and directly addresses the question about how the Absorption effect works.', 'chunk_usage': 'The AI used the chunks partially but failed to include all relevant details, particularly the limitations of absorption hearts and the immunity of the Ender Dragon.'}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q6</td>
                            <td class="question-cell">
                                <div class="question-text">What is an Activator Rail and how does it work?</div>
                                <div class="reference-text">Ref: An Activator Rail is a type of rail that affects minecarts when powered. When active, it ejects entities from regular minecarts, locks hopper minecarts preventing item pickup, and primes TNT minecarts to explode after 4 seconds. When inactive, it enables hopper minecarts to pick up items again. It can be powered by adjacent redstone components and activates up to 8 connected rails.</div>
                            </td>
                            <td class="answer-cell">An Activator Rail is a type of rail in Minecraft that can be used to affect minecarts that travel over them.<br><br>When an activator rail is placed, it will align itself with the nearest rail or block that is one block up. If there are multiple options for the activator rail to slant upward towards, it &quot;prefers&quot; the following options: west, east, south, and north.<br><br>Activator rails can also be used as a &quot;road&quot; for minecarts, allowing them to move over the activator rail without losing much velocity.<br><br>Overall, an Activator Rail is a type of rail that can be used to affect minecarts and guide their movement.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(239, 68, 68, 0.1); color: #ef4444; border: 1px solid #ef4444;">25/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">CTX 67%</span>
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">GRD 50%</span>
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">ANS 33%</span>
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">FTH 40%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(6)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-6" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is partially correct but misses critical functionality of the Activator Rail and includes minor irrelevant details.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    - **CHUNK 1 (Score: 3)**: Highly relevant. It directly explains what an Activator Rail is and how it works, including its effects on minecarts (ejecting entities, locking hopper minecarts, priming TNT minecarts) and how it can be powered by redstone components. This chunk fully addresses the question and aligns with the Reference Answer.<br>    - **CHUNK 2 (Score: 1)**: Somewhat related but not useful for answering the question. It discusses mob interactions with activator rails and piston mechanics, which are tangentially related to rails but do not explain the core functionality of an Activator Rail as asked in the question.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - An Activator Rail is a type of rail in Minecraft that can be used to affect minecarts that travel over them.: SUPPORTED<br>  - When an activator rail is placed, it will align itself with the nearest rail or block that is one block up.: SUPPORTED<br>  - If there are multiple options for the activator rail to slant upward towards, it 'prefers' the following options: west, east, south, and north.: SUPPORTED<br>  - Activator rails can also be used as a 'road' for minecarts, allowing them to move over the activator rail without losing much velocity.: SUPPORTED<br>  - Overall, an Activator Rail is a type of rail that can be used to affect minecarts and guide their movement.: UNSUPPORTED<br>  - When active, it ejects entities from regular minecarts, locks hopper minecarts preventing item pickup, and primes TNT minecarts to explode after 4 seconds.: UNSUPPORTED<br>  - When inactive, it enables hopper minecarts to pick up items again.: UNSUPPORTED<br>  - It can be powered by adjacent redstone components and activates up to 8 connected rails.: UNSUPPORTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': {'correct': 'The AI correctly identifies the Activator Rail as a type of rail that affects minecarts and can guide their movement.', 'incorrect_or_missing': 'It fails to mention the *key functionality* of the Activator Rail: ejecting entities from minecarts, locking hopper minecarts, priming TNT minecarts, and its redstone-powered activation behavior. These are core aspects of the REFERENCE and CHUNKS.'}, 'completeness': {'missing_parts': 'The answer omits all functional effects of the Activator Rail (e.g., ejecting entities, locking hoppers, priming TNT) and its redstone powering mechanics. It also does not explain the difference between active/inactive states or the propagation of power to connected rails (up to 8).', 'irrelevant_details': &quot;The AI includes unnecessary details about rail alignment preferences (e.g., 'prefers west, east, south, and north') and minecart velocity, which are not part of the question's focus.&quot;}, 'hallucinations': 'None detected. All provided information is supported by the CHUNKS, though some is off-topic.', 'relevance': &quot;The answer stays on topic but focuses too much on rail placement/orientation and minecart movement, ignoring the primary question about the Activator Rail's *purpose* and *mechanics*.&quot;, 'chunk_usage': &quot;The AI uses CHUNK 1 for rail alignment and minecart movement but ignores CHUNK 1's critical sections about redstone activation and minecart effects (e.g., ejecting entities, locking hoppers). CHUNK 2 is entirely unused.&quot;}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q7</td>
                            <td class="question-cell">
                                <div class="question-text">Where can I find an Ancient City and what's inside?</div>
                                <div class="reference-text">Ref: Ancient Cities generate in deep dark biomes at Y level -51. They are large palatial structures with corridors covered in gray wool to prevent vibrations, ruins with loot chests, and sculk blocks. The center features a frame resembling a warden's head with unobtainable reinforced deepslate. Chests contain unique items like echo shards, disc fragments, Swift Sneak enchantment, and exclusive armor trims.</div>
                            </td>
                            <td class="answer-cell">An Ancient City is a structure found in the Deep Dark biome at Y level -51. It features a large palace that stretches throughout the biome, harboring chests containing items such as disc fragments that cannot be found anywhere else. The city center bears a resemblance to early iterations of the Warden's design, and other structures resemble pillager outposts, woodland mansion wool rooms, and mineshafts.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b; border: 1px solid #f59e0b;">35/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">CTX 83%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">GRD 100%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">FTH 80%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(7)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-7" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is mostly accurate but lacks key details about the Ancient City's contents, structure, and unique features, reducing completeness.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    **Chunk 1 (ID: ancient_city_1)** is **highly relevant (3)** because it directly answers the question by providing:<br>    - The location of Ancient Cities (deep dark biomes at Y level -51).<br>    - Detailed descriptions of the interior (gray wool corridors, ruins with loot chests, sculk blocks, warden-head frame, reinforced deepslate).<br>    - Specific loot items (disc fragments, echo shards implied via 'unique items', Swift Sneak enchantment not explicitly named but hinted at via 'exclusive items').<br>    - Additional context (vibration prevention, unobtainable blocks) that aligns with the Reference Answer.<br><br>    **Chunk 2 (ID: cave_4)** is **relevant (2)** but less comprehensive. It:<br>    - Correctly identifies the location (deep dark biome) and some interior features (gray wool floors, warden-head frame, reinforced deepslate).<br>    - Mentions loot chests with 'items that cannot be found anywhere else' (partially addressing the 'what's inside' question).<br>    - However, it lacks key details like Y level (-51), specific loot (echo shards, Swift Sneak), and the full scope of the structure (e.g., sculk prevalence, hidden basements). It also includes irrelevant information about other cave structures (monster rooms, amethyst geodes), diluting its usefulness.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - An Ancient City is a structure found in the Deep Dark biome at Y level -51.: SUPPORTED<br>  - It features a large palace that stretches throughout the biome,: SUPPORTED<br>  - harboring chests containing items such as disc fragments that cannot be found anywhere else.: SUPPORTED<br>  - The city center bears a resemblance to early iterations of the Warden's design,: SUPPORTED<br>  - and other structures resemble pillager outposts, woodland mansion wool rooms, and mineshafts.: SUPPORTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': {'correct': &quot;The AI correctly identifies the Ancient City's location (Deep Dark biome at Y level -51) and mentions its palace-like structure and unique loot (disc fragments). It also notes the resemblance to the Warden's design and other structures (pillager outposts, woodland mansions, mineshafts).&quot;, 'errors': 'No outright factual errors, but the answer is overly simplistic.'}, 'completeness': {'missing_details': ['No mention of gray wool floors to prevent vibrations or sculk blocks.', 'No reference to the reinforced deepslate (unobtainable material) in the center frame.', 'No details about loot chests containing echo shards, Swift Sneak enchantment, or armor trims.', &quot;No description of the city's size (220-block footprint) or hidden basements with redstone circuitry.&quot;, 'No mention of soul lanterns, candles, or other unique blocks.']}, 'hallucinations': 'None detected. All information is supported by the chunks or reference.', 'relevance': 'The answer stays on topic but is too brief and omits critical details.', 'chunk_usage': 'The AI used the chunks partially but failed to incorporate many key points from [CHUNK 1], which provides the most detailed description.'}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q8</td>
                            <td class="question-cell">
                                <div class="question-text">What is Ancient Debris and where can I find it?</div>
                                <div class="reference-text">Ref: Ancient Debris is a rare ore found in the Nether that can only be mined with a diamond or netherite pickaxe. It generates most commonly at Y-level 16, between levels 8 to 24. It never spawns exposed to air and is immune to normal explosions. In item form, it floats on lava and is immune to fire. When smelted, it produces netherite scraps used to craft netherite ingots.</div>
                            </td>
                            <td class="answer-cell">Ancient Debris is a rare ore found in the Nether. It's the main source of netherite scraps, which can then be used to craft netherite ingots.<br><br>You can find Ancient Debris by generating it in the Nether. On average, Y-level 16 has the most Ancient Debris.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b; border: 1px solid #f59e0b;">35/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">CTX 50%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">GRD 100%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">FTH 100%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(8)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-8" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is factually accurate but lacks several key details about mining requirements, exact Y-level ranges, and properties of Ancient Debris.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    - **CHUNK 1 (ID: ancient_debris)**: Highly relevant (score: 3). This chunk directly answers the question by providing all key details from the Reference Answer:<br>      1. Ancient Debris is a rare Nether ore.<br>      2. Requires a diamond or netherite pickaxe to mine.<br>      3. Generates most commonly at Y-level 16 (between 8–24).<br>      4. Never spawns exposed to air.<br>      5. Immune to explosions.<br>      6. Floats on lava and is fire-immune in item form.<br>      7. Smelted into netherite scraps for netherite ingots.<br>      Additional details (e.g., generation mechanics, bastion chests) are extraneous but not misleading.<br><br>    - **CHUNK 2 (ID: smooth_basalt)**: Completely irrelevant (score: 0). This chunk discusses smooth basalt, an unrelated decorative block with no connection to Ancient Debris or the question. It could mislead users into thinking basalt is relevant to finding Ancient Debris.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - Ancient Debris is a rare ore found in the Nether.: SUPPORTED<br>  - It's the main source of netherite scraps, which can then be used to craft netherite ingots.: SUPPORTED<br>  - You can find Ancient Debris by generating it in the Nether.: SUPPORTED<br>  - On average, Y-level 16 has the most Ancient Debris.: SUPPORTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': {'correct': 'The AI correctly identifies Ancient Debris as a rare ore in the Nether and its role in crafting netherite ingots/scraps. It also correctly states that Y-level 16 has the most Ancient Debris.', 'missing': 'The AI omits critical details such as the requirement to mine it with a diamond or netherite pickaxe, the Y-level range (8-24), its immunity to explosions, its behavior in lava/fire, and the smelting process to obtain netherite scraps.'}, 'completeness': {'answer_parts': &quot;The question asks for two things: (1) What is Ancient Debris? and (2) Where can it be found? The AI partially answers both but misses key aspects of 'what' (properties, mining requirements) and 'where' (exact generation rules, air exposure, etc.).&quot;, 'gaps': 'Major gaps include mining tools, Y-level specifics beyond Y=16, explosion immunity, lava/fire behavior, and smelting outcomes.'}, 'hallucinations': 'None detected. The AI sticks to information present in the chunks or reference.', 'relevance': 'The answer stays on topic but is overly simplistic given the depth of the chunks provided.', 'chunk_usage': 'The AI uses the chunks but fails to extract or emphasize critical details (e.g., mining tools, Y-level range, properties). It focuses on the most basic information while ignoring nuanced generation rules and utility.'}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q9</td>
                            <td class="question-cell">
                                <div class="question-text">How do amethyst clusters grow?</div>
                                <div class="reference-text">Ref: Amethyst clusters grow on budding amethyst blocks in amethyst geodes. When a budding amethyst receives a random tick, there is a 20% chance for a small amethyst bud to generate on any of its sides. Buds grow through four stages: small, medium, large, and finally amethyst cluster. Only fully grown clusters drop amethyst shards when mined. Mining with Fortune III can yield up to 16 shards.</div>
                            </td>
                            <td class="answer-cell">An amethyst bud placed on a budding amethyst (rather than any other block) grows over time, regardless whether it was placed by the player or spawned by the budding amethyst itself. <br><br>That bud goes through three growth stages – small, medium, and large – before reaching its 4th and final growth stage as an amethyst cluster.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b; border: 1px solid #f59e0b;">35/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">CTX 100%</span>
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">GRD 50%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">FTH 50%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(9)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-9" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is factually accurate but incomplete, missing key details about growth mechanics and conditions.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    - **CHUNK 1 (ID: budding_amethyst)**:<br>      Score: 3 (Highly relevant)<br>      This chunk directly answers the question by explaining the growth process of amethyst clusters, including the stages (small, medium, large, and cluster), the role of budding amethyst blocks, the 20% chance per random tick for growth, and the requirement for the cluster to be fully grown to drop shards. It aligns closely with the Reference Answer and provides all necessary details.<br><br>    - **CHUNK 2 (ID: amethyst_cluster_2)**:<br>      Score: 3 (Highly relevant)<br>      This chunk also fully addresses the question by detailing the growth mechanics, including the 20% chance per random tick, the 4 growth stages, and the time calculations for full growth. It reinforces the information in Chunk 1 and adds clarity to the process, making it equally useful for answering the question correctly.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - An amethyst bud placed on a budding amethyst (rather than any other block) grows over time, regardless whether it was placed by the player or spawned by the budding amethyst itself.: SUPPORTED<br>  - That bud goes through three growth stages – small, medium, and large – before reaching its 4th and final growth stage as an amethyst cluster.: CONTRADICTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': {'status': 'Correct', 'details': 'The AI answer correctly states that amethyst buds grow on budding amethyst blocks and progress through three stages (small, medium, large) before becoming a cluster. This aligns with the reference and chunks.'}, 'completeness': {'status': 'Incomplete', 'missing_details': ['No mention of the 20% chance per random tick for growth initiation (critical for understanding growth rate).', &quot;No explanation of the four growth stages (reference mentions 'small, medium, large, and amethyst cluster'; AI omits the final stage name).&quot;, 'No details about mining rewards (amethyst shards) or Fortune III mechanics.', 'No context about growth conditions (e.g., random tick range, obstruction rules, or time estimates).']}, 'hallucinations': {'status': 'None', 'details': 'The AI answer does not introduce any unsupported or invented information.'}, 'relevance': {'status': 'Relevant', 'details': 'The answer stays on topic but lacks depth.'}, 'chunk_usage': {'status': 'Underutilized', 'details': 'The AI answer only uses a small portion of the provided chunks (e.g., growth stages) but ignores critical details like random tick mechanics, growth probability, and mining outcomes.'}}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                        <tr>
                            <td style="font-weight: 600; color: #3B82F6;">Q10</td>
                            <td class="question-cell">
                                <div class="question-text">What is an Anvil used for?</div>
                                <div class="reference-text">Ref: An Anvil is used to rename items, combine enchantments, and repair items without losing enchantments. It requires 31 iron ingots to craft. Players can repair items by combining two similar items or using repair materials like iron ingots for iron tools. The anvil has a 12% chance to become damaged with each use, going from normal to chipped to damaged before breaking. It has a repair cost limit of 39 levels.</div>
                            </td>
                            <td class="answer-cell">An Anvil is used to rename items, combine enchantments, and repair items without losing their enchantments.</td>
                            <td>
                                <span class="score-badge" style="background: rgba(16, 185, 129, 0.1); color: #10b981; border: 1px solid #10b981;">40/50</span>
                            </td>
                            <td class="metrics-cell">
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">CTX 67%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">GRD 100%</span>
                                <span class="metric-pill" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">ANS 67%</span>
                                <span class="metric-pill" style="background: rgba(16, 185, 129, 0.1); color: #10b981;">FTH 100%</span>
                            </td>
                            <td>
                                <button class="details-toggle" onclick="toggleDetails(10)">Show Details</button>
                            </td>
                        </tr>
                        <tr id="details-row-10" class="details-row" style="display: none;">
                            <td colspan="6">
                                <div class="details-content-expanded">
                                    <div class="details-grid">
                                        <div class="detail-section">
                                            <strong>Score Analysis:</strong>
                                            The AI answer is factually accurate and relevant but lacks several key details from the reference and chunks, such as crafting requirements, durability mechanics, and repair cost limits.
                                        </div>
                                        <div class="detail-section">
                                            <strong>Context Relevance:</strong>
                                            <br>    - **CHUNK 1 (ID: deprecated_anvil)**: Score 1. This chunk is somewhat related but not useful for answering the question. It focuses on a deprecated variant of the anvil, which is not relevant to the general use of anvils in the game. While it mentions that the deprecated anvil functions identically to a regular anvil, it does not provide the core information needed (e.g., renaming items, combining enchantments, repair mechanics, or crafting requirements).<br><br>    - **CHUNK 2 (ID: anvil_1)**: Score 3. This chunk is highly relevant and contains all the key information needed for the correct answer. It explicitly covers the primary uses of an anvil (renaming items, combining enchantments, repairing items without losing enchantments), durability mechanics, crafting requirements (31 iron ingots), and repair methods (combining items or using materials). This chunk directly aligns with the Reference Answer and would enable a correct response to the question.<br>  
                                        </div>
                                        <div class="detail-section">
                                            <strong>Groundedness:</strong>
                                              - An Anvil is used to rename items: SUPPORTED<br>  - An Anvil is used to combine enchantments: SUPPORTED<br>  - An Anvil is used to repair items without losing their enchantments: SUPPORTED
                                        </div>
                                        <div class="detail-section">
                                            <strong>Detailed:</strong>
                                            {'factual_accuracy': 'The AI answer correctly states the primary uses of an anvil (renaming items, combining enchantments, and repairing items without losing enchantments). This aligns with both the reference and the retrieved chunks (especially CHUNK 2). No factual errors were introduced.', 'completeness': &quot;The answer is incomplete. It omits critical details such as:\n      - The crafting requirement of 31 iron ingots (reference and CHUNK 2).\n      - The anvil's durability system (12% chance to damage per use, progression from normal to chipped to damaged, and eventual breaking) (reference and CHUNK 2).\n      - The repair cost limit of 39 levels (reference).\n      - Specific repair mechanics (e.g., combining two similar items or using repair materials) (reference and CHUNK 2).&quot;, 'hallucinations': 'No hallucinations detected. The AI answer strictly adheres to the provided context and does not invent unsupported information.', 'relevance': 'The answer is fully relevant to the question and stays on topic.', 'use_of_chunks': 'The AI answer partially uses the chunks but misses many supported details, particularly from CHUNK 2, which provides extensive information about durability, crafting, and repair mechanics.'}
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>RAG Evaluation Report | Powered by Tryll Engine Inc.</p>
        </div>
    </div>

    <script>
        // Toggle details row visibility
        function toggleDetails(id) {
            const row = document.getElementById('details-row-' + id);
            const btn = event.target;
            if (row.style.display === 'none') {
                row.style.display = 'table-row';
                btn.textContent = 'Hide Details';
            } else {
                row.style.display = 'none';
                btn.textContent = 'Show Details';
            }
        }

        // Scores Bar Chart
        const scoresCtx = document.getElementById('scoresChart').getContext('2d');
        new Chart(scoresCtx, {
            type: 'bar',
            data: {
                labels: ["Q1", "Q2", "Q3", "Q4", "Q5", "Q6", "Q7", "Q8", "Q9", "Q10"],
                datasets: [{
                    label: 'Score',
                    data: [38, 28, 42, 35, 35, 25, 35, 35, 35, 40],
                    backgroundColor: [38, 28, 42, 35, 35, 25, 35, 35, 35, 40].map(score => {
                        if (score >= 40) return 'rgba(16, 185, 129, 0.7)';
                        if (score >= 25) return 'rgba(245, 158, 11, 0.7)';
                        return 'rgba(239, 68, 68, 0.7)';
                    }),
                    borderColor: [38, 28, 42, 35, 35, 25, 35, 35, 35, 40].map(score => {
                        if (score >= 40) return '#10b981';
                        if (score >= 25) return '#f59e0b';
                        return '#ef4444';
                    }),
                    borderWidth: 2,
                    borderRadius: 8
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 50,
                        grid: { color: 'rgba(255,255,255,0.08)' },
                        ticks: { color: 'rgba(255,255,255,0.55)' }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { color: 'rgba(255,255,255,0.55)' }
                    }
                }
            }
        });

        // Radar Chart
        const radarCtx = document.getElementById('radarChart').getContext('2d');
        new Chart(radarCtx, {
            type: 'radar',
            data: {
                labels: ['Context Relevance', 'Groundedness', 'Answer Relevance', 'Faithfulness'],
                datasets: [{
                    label: 'Average Metrics',
                    data: [80.0, 79.4, 63.3, 80.9],
                    backgroundColor: 'rgba(59, 130, 246, 0.15)',
                    borderColor: '#3B82F6',
                    borderWidth: 2,
                    pointBackgroundColor: '#3B82F6',
                    pointBorderColor: '#F6F0EB',
                    pointHoverBackgroundColor: '#F6F0EB',
                    pointHoverBorderColor: '#3B82F6'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        grid: { color: 'rgba(255,255,255,0.08)' },
                        angleLines: { color: 'rgba(255,255,255,0.08)' },
                        pointLabels: { color: 'rgba(255,255,255,0.85)', font: { size: 11, weight: 500 } },
                        ticks: {
                            color: 'rgba(255,255,255,0.5)',
                            backdropColor: 'transparent'
                        }
                    }
                },
                plugins: {
                    legend: { display: false }
                }
            }
        });

        // Metrics Breakdown Chart
        const metricsCtx = document.getElementById('metricsChart').getContext('2d');
        new Chart(metricsCtx, {
            type: 'bar',
            data: {
                labels: ["Q1", "Q2", "Q3", "Q4", "Q5", "Q6", "Q7", "Q8", "Q9", "Q10"],
                datasets: [
                    {
                        label: 'Context Relevance',
                        data: [83.3, 66.7, 83.3, 100.0, 100.0, 66.7, 83.3, 50.0, 100.0, 66.7],
                        backgroundColor: 'rgba(59, 130, 246, 0.7)',
                        borderRadius: 4
                    },
                    {
                        label: 'Groundedness',
                        data: [50.0, 44.4, 100.0, 100.0, 100.0, 50.0, 100.0, 100.0, 50.0, 100.0],
                        backgroundColor: 'rgba(35, 46, 65, 0.9)',
                        borderRadius: 4
                    },
                    {
                        label: 'Answer Relevance',
                        data: [66.7, 66.7, 66.7, 66.7, 66.7, 33.3, 66.7, 66.7, 66.7, 66.7],
                        backgroundColor: 'rgba(246, 240, 235, 0.7)',
                        borderRadius: 4
                    },
                    {
                        label: 'Faithfulness',
                        data: [100.0, 56.0, 83.0, 100.0, 100.0, 40.0, 80.0, 100.0, 50.0, 100.0],
                        backgroundColor: 'rgba(16, 185, 129, 0.7)',
                        borderRadius: 4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { color: 'rgba(255,255,255,0.85)' }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        grid: { color: 'rgba(255,255,255,0.08)' },
                        ticks: { color: 'rgba(255,255,255,0.55)' }
                    },
                    x: {
                        grid: { display: false },
                        ticks: { color: 'rgba(255,255,255,0.55)' }
                    }
                }
            }
        });
    </script>
</body>
</html>
